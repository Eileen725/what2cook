{% extends "base.html" %}

{% block content %}
<div style="background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
  <h1>ğŸ›’ Einkaufsliste</h1>
  <p style="color: #666; margin-top: 10px;">
    Gib Zutaten ein, die du zu Hause hast, und finde passende Rezepte!
  </p>
  
  <!-- Suchformular -->
  <form method="POST" style="margin-top: 30px;">
    <div class="form-group">
      <label for="zutaten">ğŸ¥— Welche Zutaten hast du?</label>
      <input type="text" 
             id="zutaten" 
             name="zutaten" 
             class="form-control" 
             placeholder="z.B. Tomaten, Pasta, KÃ¤se (getrennt durch Komma)"
             value="{{ suchbegriffe }}"
             style="font-size: 16px; padding: 12px;"
             autofocus>
      <p class="help-block">Trenne mehrere Zutaten mit Komma. DrÃ¼cke Enter zum Suchen.</p>
    </div>
    <button type="submit" class="btn btn-primary btn-lg">ğŸ” Rezepte finden</button>
  </form>

  <!-- Ergebnisse -->
  {% if suchbegriffe %}
    <hr style="margin: 40px 0;">
    
    {% if rezepte %}
      <div style="display: flex; gap: 20px; margin-top: 20px;">
        <!-- Linke Seite: Einkaufsliste -->
        <div style="flex: 1; background: #e8f5e9; padding: 20px; border-radius: 8px; border: 2px solid #4caf50;">
          <h3 style="margin-top: 0; color: #2e7d32;">ğŸ›’ Deine Einkaufsliste</h3>
          <p style="color: #666; margin-bottom: 15px;">Alle benÃ¶tigten Zutaten fÃ¼r {{ rezepte|length }} Rezept(e):</p>
          
          <ul style="list-style: none; padding: 0;">
            {% for item in einkaufsliste %}
              <li style="padding: 8px 0; border-bottom: 1px solid #c8e6c9;">
                <input type="checkbox" style="margin-right: 10px;">
                <strong>{{ item.name }}</strong>
                {% if item.number %}
                  <span style="color: #666;">- {{ item.number }}</span>
                {% endif %}
                {% if item.einheit %}
                  <span style="color: #666;">{{ item.einheit }}</span>
                {% endif %}
                <br>
                <small style="color: #999; margin-left: 28px;">fÃ¼r {{ item.rezept }}</small>
              </li>
            {% endfor %}
          </ul>
          
          <button onclick="window.print()" class="btn btn-success btn-sm" style="margin-top: 15px;">
            ğŸ–¨ï¸ Liste drucken
          </button>
        </div>
        
        <!-- Rechte Seite: Gefundene Rezepte -->
        <div style="flex: 2;">
          <h3>ğŸ‰ {{ rezepte|length }} Rezept(e) gefunden</h3>
          
          {% for rezept in rezepte %}
            <div style="background: #f9f9f9; padding: 20px; margin-bottom: 15px; border-radius: 8px; border-left: 4px solid #5cb85c;">
              <h4 style="margin-top: 0;">
                <a href="{{ url_for('rezept_detail', rezept_id=rezept.id) }}" style="color: #333; text-decoration: none;">
                  {{ rezept.name }}
                </a>
              </h4>
              <p style="color: #666; margin-bottom: 10px;">{{ rezept.description }}</p>
              
              <a href="{{ url_for('rezept_detail', rezept_id=rezept.id) }}" class="btn btn-sm btn-primary">
                Rezept Ã¶ffnen â†’
              </a>
            </div>
          {% endfor %}
        </div>
      </div>
    {% else %}
      <div style="text-align: center; padding: 40px; background-color: #fff3cd; border-radius: 8px; border: 1px solid #ffc107;">
        <h3 style="color: #856404;">ğŸ¤” Keine Rezepte gefunden</h3>
        <p style="color: #856404; margin-top: 10px;">
          Mit den Zutaten "{{ suchbegriffe }}" wurde leider kein Rezept gefunden.
        </p>
        <p style="color: #856404;">
          Versuche es mit anderen Zutaten oder fÃ¼ge neue Rezepte hinzu!
        </p>
      </div>
    {% endif %}
  {% endif %}
</div>
{% endblock %}
